# 界面与交互设计

本文件描述 Chest Idle 前端的用户界面布局、交互流程与响应式策略，确保在扩展功能时保持一致体验。

## 1. 总体布局

- **左侧侧边栏**：技能菜单（采矿、伐木、采摘、锻造、木工、缝纫、烹饪、冲泡、战斗）。战斗项展开后显示战斗属性分类（智力、耐力、防御、近战、远程、魔法）。移动端支持折叠。
- **中部主内容区**：
  - 生产技能页面：行动列表、技能进度、分组标签（如材料/工具）。
  - 战斗页面：敌人选择、仿真结果、战斗记录。
  - 辅助页面：状态浏览、通知历史。
- **右侧工具栏**：背包/装备/增益标签页，支持拖拽调整宽度。移动端折叠进底部抽屉。
- **顶部栏**：显示游戏名称、行动队列摘要、全局提示入口。

## 2. 核心交互

### 2.1 行动队列

- `当前行动卡片`：显示目标名称、剩余次数、进度条、预计完成时间。
- `队列管理`：列表展示后续行动，提供上下移动、移到首位/队尾、删除、清空等操作。
- `新增行动`：在行动详情弹窗中设置次数（含无限符号）、选择“加入队列”或“立即执行”。
- 当行动需要材料时，弹窗即时展示材料消耗，并在确认时自动缩减次数。
- 队列满时插入首位需二次确认。

### 2.2 技能页面

- 顶部显示技能名称、等级、XP 条、升级所需 XP。
- 按 `tab` 分组展示行动（如锻造的材料、工具、装备）。
- 行动卡片包含：名称、耗时、经验、宝箱能量、产物与材料列表。
- 点击卡片弹出详情，展示增益信息（速度、经验、宝箱加成）和当前材料库存。

### 2.3 背包与装备

- 背包页以卡片网格展示物品，显示数量与类型。
- 装备页按槽位排列，显示已装备道具及强化信息。
- 点击物品弹出模态框：查看描述、属性、装备/卸下/开箱/使用等操作。
- 咖啡/茶/食物槽位显示剩余持续时间，支持替换、更换增益。

### 2.4 战斗页面

- 左侧敌人列表（单个或小队），支持过滤与搜索。
- 中部显示仿真结果：胜负、耗时、资源消耗、预计掉落（非随机部分）。
- 失败时展示原因（超时、属性不足），提供提升建议。
- 成功时按钮改为“确认战斗”，提示等待时间与服务端验证流程。
- 右侧显示当前装备、消耗品配置，便于即时调整。

### 2.5 通知系统

- 使用右上角通知中心展示队列事件（完成、被缩减、材料不足）、技能升级、开箱结果等。
- 重要事件（战斗失败、存档失败）使用弹窗或明显高亮。

## 3. 响应式策略

- ≥1280px：三栏布局；侧边栏固定，背包面板可调宽。
- 768px–1279px：侧边栏折叠为抽屉，背包面板转为底部标签。
- <768px：单列布局；行动详情、背包等以全屏 modal 呈现。

## 4. 可用性与无障碍

- 关键按钮需具备键盘焦点样式，支持 `Enter`/`Space` 操作。
- 文案与数值提供多语言支持（中文、英文）。
- 使用色彩对比 ≥ 4.5:1，提供色盲友好的状态指示（不仅依赖颜色）。
- 提供可选“精简动画”设置，减少过度过渡效果。

## 5. 引导与反馈

- 新手引导：首次进入时展示行动队列、背包、开箱的 tooltips 或分步引导。
- 队列自动缩减时，通知和行动详情需同步显示“已调整为 X 次”。
- 战斗仿真失败时给出具体属性差距（如：“需要防御 ≥ 120 (当前 95)”）。

## 6. UI 组件库

- 项目维持自定义 UI 组件：按钮、卡片、进度条、标签、模态框。
- 常用组件位于 `components/common/`，支持主题与尺寸参数。
- 组件需提供 Storybook 或文档用例，便于复用与测试。

---

遵循上诉设计可以确保 gameplay 文档中的所有机制在 UI 层得到清晰呈现，后续如新增系统（如成就、排行榜）需在此基础上扩展对应的布局与交互说明。